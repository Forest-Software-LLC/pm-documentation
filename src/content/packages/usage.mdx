import { FileTree } from 'nextra/components'
 


# Using a package in your workflow

This section will cover how to use packages in your project's workflow.

### Prerequisites

Before you can create and upload packages, you'll need to have the [Forest CLI](/cli/installation) installed.

## Installing Packages

For this example, we'll be making spaghetti. To make spaghetti, we need 3 ingredients: pasta, sauce, and meatballs.

Lets say we found 3 packages that provide these ingredients: `@forest/pasta`, `@user1/sauce`, and `@user1/meatballs`.

We'll cover the install commands in detail later, but for now, we'll use the following commands to install these packages:

```bash
forest i @forest/pasta
forest i @user1/sauce
forest i @user1/meatballs
```

Now that we have our ingredients installed, developers can use these packages in their code.

```lua
local Pasta = require("pasta")
local Sauce = require("sauce")
local Meatballs = require("meatballs")

-- Do something with our now imported ingredients
```

Its that easy! The package manager handles downloading the packages, as well as any dependencies they may have, so you can focus on building your project.

## Package Dependencies

When you install a package, the package manager will also install any dependencies that package has. For example, if `@forest/pasta` relies on a package called `@forest/flour`, the package manager will automatically install `@forest/flour` when you install `@forest/pasta`.

When this happens, its likely your project's file tree will look something like this:

<FileTree>
  <FileTree.Folder name="my-project" defaultOpen>
    <FileTree.File name="script.lua" />
    <FileTree.Folder name="packages" defaultOpen>
        <FileTree.Folder name="pasta" defaultOpen>
            <FileTree.File name="init.lua" />
            <FileTree.File name="LICENSE" />
            <FileTree.Folder name="packages" defaultOpen>
                <FileTree.Folder name="flour" defaultOpen>
                    <FileTree.File name="init.lua" />
                    <FileTree.File name="LICENSE" />
                </FileTree.Folder>
            </FileTree.Folder>
        </FileTree.Folder>
        <FileTree.Folder name="sauce">
            <FileTree.File name="init.lua" />
            <FileTree.File name="LICENSE" />
        </FileTree.Folder>
        <FileTree.Folder name="meatballs">
            <FileTree.File name="init.lua" />
            <FileTree.File name="LICENSE" />
        </FileTree.Folder>
    </FileTree.Folder>
  </FileTree.Folder>
</FileTree>

Notice how the top-most `packages` folder contains the 3 packages we installed, and the `pasta` package contains a `packages` folder with its dependency, `flour`.

Because we didn't install flour directly, it doesn't appear in the top-most packages folder, meaning its not a package we can directly use in our project.

This structure allows packages to have their own dependencies without causing conflicts with other packages or the main project. In the event we wanted to access flour directly, we could install it ourselves using `forest i @forest/flour`, which would add it to the top-most packages folder.

## Common Questions
> What happens if two packages depend on the same package?

Forest package manager uses a technique called "dependency deduplication" to ensure that if multiple packages depend on the same package, only one copy of that package is installed. This helps to reduce disk space usage and avoid version conflicts.

> What if two packages depend on different versions of the same package?

In cases where two packages depend on different versions of the same package, the package manager will install both versions in separate folders within the `packages` directory. 

This allows each package to use the version it was designed to work with, preventing compatibility issues. However, this can lead to increased disk space usage, so it's generally recommended to use packages that depend on compatible versions of shared dependencies whenever possible.

> What happens if I install 2 packages with the same name?

If you attempt to install two packages with the same name but from different authors or sources, the package manager will treat them as separate entities based on their full package identifiers (which typically include the author's namespace).

This means you can have `@user1/package` and `@user2/package` installed simultaneously without conflict, as they are considered distinct packages.

Importing those packages will require using their full names to avoid ambiguity:

```lua
local Package1 = require("user1_package")
local Package2 = require("user2_package")