import { FileTree } from 'nextra/components'
 


# Using a package in your workflow

This section will cover how to use packages in your project's workflow.

### Prerequisites

Before you can create and upload packages, you'll need to have the [Forest CLI](/cli/installation) installed.

## Installing Packages

For this metaphorical example, we'll be cooking (coding) spaghetti. To make spaghetti, we need to grab (install) 3 ingredients (packages): pasta, sauce, and meatballs.

Lets say you found 3 packages that provide these ingredients: `@forest/pasta`, `@user1/sauce`, and `@user1/meatballs`.

We'll cover the install commands in detail later, but for now, use the following to install the packages:

```bash
forest i @forest/pasta
forest i @user1/sauce
forest i @user1/meatballs
```

Now that we have our ingredients installed, we can import them into our project and start cooking.
```lua
local Pasta = require("pasta")
local Sauce = require("sauce")
local Meatballs = require("meatballs")

-- Do something with our now-imported ingredients
```

Using packages this way means every part of your project stays modular. You can update, replace, or share each “ingredient” without breaking the rest of your code.
## Package Dependencies

When you install a package, Forest automatically installs any dependencies it requires.
For example, if `@forest/pasta` depends on `@forest/flour`, Forest installs both packages when you run: `forest i @forest/pasta
`
After installation, your project’s file tree will look like this:

<FileTree>
  <FileTree.Folder name="my-project" defaultOpen>
    <FileTree.File name="script.lua" />
    <FileTree.Folder name="packages" defaultOpen>
        <FileTree.Folder name="pasta" defaultOpen>
            <FileTree.File name="init.lua" />
            <FileTree.File name="LICENSE" />
            <FileTree.Folder name="packages" defaultOpen>
                <FileTree.Folder name="flour" defaultOpen>
                    <FileTree.File name="init.lua" />
                    <FileTree.File name="LICENSE" />
                </FileTree.Folder>
            </FileTree.Folder>
        </FileTree.Folder>
        <FileTree.Folder name="sauce">
            <FileTree.File name="init.lua" />
            <FileTree.File name="LICENSE" />
        </FileTree.Folder>
        <FileTree.Folder name="meatballs">
            <FileTree.File name="init.lua" />
            <FileTree.File name="LICENSE" />
        </FileTree.Folder>
    </FileTree.Folder>
  </FileTree.Folder>
</FileTree>

In the example file tree, the root `packages` folder contains the three packages we installed. Inside the `pasta` package, there’s another `packages` folder with its dependency, `flour`.

Since we didn’t install flour directly, it doesn’t appear in the root packages folder. That means it isn’t available for you to require() in your project.

This structure keeps dependencies isolated. Each package manages its own requirements without affecting the main project or other packages. If you do want to use flour directly, you can install it yourself with:
`forest i @forest/flour`

> **TODO:** Alex suggests that FAQs becomes its own following subsections

## Commonly Asked Questions
> What happens if two packages depend on the same package?

Forest uses a technique called "dependency de-duplication" to ensure that if multiple packages depend on the same package, only one copy of that package is installed. This helps to reduce disk space usage and avoid version conflicts.

> What if two packages depend on different versions of the same package?

In cases where two packages depend on different versions of the same package, the package manager will install both versions in separate folders within the `packages` directory. 

This allows each package to use the version it was designed to work with, preventing compatibility issues. However, this can lead to increased disk space usage, so it's generally recommended to use packages that depend on compatible versions of shared dependencies whenever possible.

> What happens if I install 2 packages with the same name?

If you attempt to install two packages with the same name but from different authors or sources, Forest will treat them as separate entities based on their full package identifiers (which typically include the author's namespace).

This means you can have `@user1/package` and `@user2/package` installed simultaneously without conflict, as they are considered distinct packages.

Importing those packages will require using their full names to avoid ambiguity:

```lua
local Package1 = require("user1_package")
local Package2 = require("user2_package")